<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>üíñ Click Me</title>

<style>
  :root{
    --bg1:#ffe6f2;
    --bg2:#fff7fb;
    --card:#ffffffcc;
    --text:#2a2a2a;
    --yes:#ff4d88;
    --no:#666;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    background:radial-gradient(circle at top,var(--bg2),var(--bg1));
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
    color:var(--text);
  }
  .card{
    width:min(92vw,520px);
    background:var(--card);
    -webkit-backdrop-filter:blur(8px);
    backdrop-filter:blur(8px);
    border:1px solid #ffffff70;
    border-radius:20px;
    padding:18px 18px 16px;
    text-align:center;
    box-shadow:0 20px 60px rgba(0,0,0,.10);
    position:relative;
    z-index:2;
  }
  h1{margin:6px 0 10px; font-size:26px}
  p{margin:10px 0 14px; line-height:1.4}

  .topbar{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:10px;
    margin-bottom:8px;
  }
  .pill{
    font-size:12px;
    padding:8px 10px;
    border-radius:999px;
    background:#fff;
    border:1px solid #eee;
    box-shadow:0 10px 25px rgba(0,0,0,.06);
    display:flex;
    align-items:center;
    gap:8px;
    white-space:nowrap;
  }
  .pill b{font-size:12px}
  .pill button{
    border:0;
    background:transparent;
    font-weight:800;
    cursor:pointer;
    padding:0;
  }

  .media{
    width:100%;
    border-radius:16px;
    overflow:hidden;
    margin:10px auto 12px;
    border:1px solid #ffffff80;
    box-shadow:0 10px 30px rgba(0,0,0,.08);
    background:#fff;
  }
  .media img{
    width:100%;
    height:220px;
    object-fit:cover;
    display:block;
  }

  .btnrow{
    display:flex;
    gap:12px;
    justify-content:center;
    flex-wrap:wrap;
    margin-top:6px;
  }
  button{
    border:0;
    padding:12px 18px;
    border-radius:999px;
    font-weight:800;
    cursor:pointer;
    font-size:16px;
    box-shadow:0 10px 25px rgba(0,0,0,.12);
    transition:transform .25s ease;
    -webkit-tap-highlight-color:transparent;
    user-select:none;
  }
  button:active{transform:scale(.98)}
  .primary{background:var(--yes);color:#fff;}
  .ghost{background:#fff;color:var(--no);border:1px solid #ddd;}

  .heart{
    position:fixed;
    font-size:18px;
    animation:floatUp 2.6s linear forwards;
    pointer-events:none;
    z-index:9997;
  }
  @keyframes floatUp{
    from{transform:translateY(0);opacity:1}
    to{transform:translateY(-220px);opacity:0}
  }

  #fx{
    position:fixed;
    inset:0;
    z-index:1;
    pointer-events:none;
  }

  .footer{
    margin-top:10px;
    font-size:12px;
    opacity:.65;
  }
</style>
</head>

<body>
<canvas id="fx"></canvas>

<div class="card">
  <div class="topbar">
    <div class="pill" title="Countdown">
      ‚è≥ <span id="countdown">--:--:--</span>
    </div>
    <div class="pill" title="Music">
      üéµ <b id="musicState">Music off</b>
      <button id="musicBtn">Play</button>
    </div>
  </div>

  <h1 id="title"></h1>

  <div class="media" id="media" style="display:none;">
    <img id="mediaImg" alt="photo">
  </div>

  <p id="msg"></p>

  <div class="btnrow" id="btnrow"></div>

  <div class="footer">Made with ‚ù§Ô∏è</div>
</div>

<audio id="bgm" preload="auto" loop></audio>

<script>
/* =======================
   CONFIG (edit these)
======================= */
const WIFE_NAME = "Sherry";
const YOUR_NAME = "Yong Xuan";

// Your repo image paths (must match exactly)
const IMG1 = "pics/1..jpeg";
const IMG2 = "pics/2..jpeg";
const IMG3 = "pics/3..jpeg";

// Upload your song to repo root as: song.mp3
const MUSIC_SRC = "song.mp3";

// Countdown target (Singapore time)
const COUNTDOWN_TARGET_ISO = "2026-02-14T00:00:00+08:00";
/* ======================= */

const screens = [
  {
    title: `Hey ${WIFE_NAME} üíó`,
    img: IMG1,
    msg: "I built a tiny page just for you‚Ä¶ ready?",
    buttons: [{ id:"next", text:"Next ‚ûú", type:"primary" }]
  },
  {
    title: "Quick question üòå",
    img: IMG2,
    msg: "Do you know you‚Äôre my favorite person in the whole world?",
    buttons: [{ id:"next", text:"Next ‚ûú", type:"primary" }]
  },
  {
    title: "Ok here it comes‚Ä¶ ü•∫",
    img: IMG3,
    msg: "Will you be my Valentine?",
    buttons: [
      { id:"yes", text:"YES üíñ", type:"primary" },
      { id:"no",  text:"No üôÉ",  type:"ghost" }
    ]
  },
  {
    title: "YAYYYYY!!! üéâüíû",
    img: IMG1,
    msg: `Happy Valentine‚Äôs Day! I love you so much ‚ù§Ô∏è ‚Äî ${YOUR_NAME}`,
    buttons: [
      { id:"fireworks", text:"Fireworks Finale üéÜ", type:"primary" },
      { id:"hearts", text:"Spam hearts üíò", type:"ghost" }
    ]
  }
];

let idx = 0;
let yesScale = 1;

// Elements
const titleEl = document.getElementById("title");
const msgEl = document.getElementById("msg");
const btnrow = document.getElementById("btnrow");
const mediaBox = document.getElementById("media");
const mediaImg = document.getElementById("mediaImg");
const countdownEl = document.getElementById("countdown");

const musicBtn = document.getElementById("musicBtn");
const musicState = document.getElementById("musicState");
const bgm = document.getElementById("bgm");

// ---- Music ----
bgm.src = MUSIC_SRC;
let musicOn = false;

function setMusicUI() {
  musicState.textContent = musicOn ? "Music on" : "Music off";
  musicBtn.textContent = musicOn ? "Pause" : "Play";
}
async function tryPlayMusic() {
  try {
    await bgm.play();
    musicOn = true;
  } catch (e) {
    musicOn = false; // iOS blocks autoplay until user gesture
  }
  setMusicUI();
}
function toggleMusic() {
  if (musicOn) {
    bgm.pause();
    musicOn = false;
    setMusicUI();
  } else {
    tryPlayMusic();
  }
}
musicBtn.addEventListener("click", toggleMusic);
setMusicUI();
tryPlayMusic(); // attempt autoplay

// ---- Render ----
function render() {
  const s = screens[idx];
  titleEl.textContent = s.title;
  msgEl.textContent = s.msg;

  if (s.img) {
    mediaImg.src = s.img;
    mediaBox.style.display = "block";
  } else {
    mediaBox.style.display = "none";
    mediaImg.removeAttribute("src");
  }

  btnrow.innerHTML = "";
  s.buttons.forEach(b => {
    const btn = document.createElement("button");
    btn.textContent = b.text;
    btn.className = b.type === "primary" ? "primary" : "ghost";

    if (b.id === "yes") {
      btn.id = "yesBtn";
      btn.style.transform = `scale(${yesScale})`;
    }

    btn.addEventListener("click", () => handleClick(b.id));
    btnrow.appendChild(btn);
  });

  popHearts(6);
}

function handleClick(id) {
  // Any user gesture can start music on iOS
  if (!musicOn) tryPlayMusic();

  if (id === "next") {
    idx = Math.min(idx + 1, screens.length - 1);
    render();
    return;
  }

  if (id === "yes") {
    idx = 3;
    render();
    popHearts(20);
    startFireworksBurst(6);
    return;
  }

  if (id === "no") {
    yesScale *= 1.28;
    const yesBtn = document.getElementById("yesBtn");
    if (yesBtn) yesBtn.style.transform = `scale(${yesScale})`;
    popHearts(8);
    return;
  }

  if (id === "hearts") {
    popHearts(40);
    return;
  }

  if (id === "fireworks") {
    startFireworksFinale();
    return;
  }
}

// ---- Countdown ----
const targetDate = new Date(COUNTDOWN_TARGET_ISO);

function pad2(n){ return String(n).padStart(2,"0"); }

function updateCountdown() {
  const now = new Date();
  let diff = targetDate - now;

  if (diff <= 0) {
    countdownEl.textContent = "IT'S TIME üíñ";
    return;
  }

  const s = Math.floor(diff / 1000);
  const days = Math.floor(s / 86400);
  const hrs  = Math.floor((s % 86400) / 3600);
  const mins = Math.floor((s % 3600) / 60);
  const secs = s % 60;

  countdownEl.textContent = `${days}d ${pad2(hrs)}:${pad2(mins)}:${pad2(secs)}`;
}
setInterval(updateCountdown, 1000);
updateCountdown();

// ---- Hearts ----
function popHearts(count){
  const emojis=["üíñ","üíò","üíù","üíó","üíì","üíï","üíû","üòç"];
  for(let i=0;i<count;i++){
    const span=document.createElement("span");
    span.className="heart";
    span.textContent=emojis[Math.floor(Math.random()*emojis.length)];
    span.style.left=(Math.random()*100)+"vw";
    span.style.bottom="10px";
    document.body.appendChild(span);
    setTimeout(()=>span.remove(),2600);
  }
}

// ---- Fireworks (Canvas) ----
const canvas = document.getElementById("fx");
const ctx = canvas.getContext("2d");

function resize() {
  const dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
  canvas.width = Math.floor(window.innerWidth * dpr);
  canvas.height = Math.floor(window.innerHeight * dpr);
  canvas.style.width = window.innerWidth + "px";
  canvas.style.height = window.innerHeight + "px";
  ctx.setTransform(dpr,0,0,dpr,0,0);
}
window.addEventListener("resize", resize);
resize();

const particles = [];
let fireworksActive = false;

function addExplosion(x, y, power=60) {
  const count = Math.floor(60 + Math.random()*40);
  for (let i=0;i<count;i++){
    const angle = (Math.PI*2) * (i / count);
    const speed = (Math.random()*2.5 + 1.2) * (power/60);
    particles.push({
      x, y,
      vx: Math.cos(angle)*speed + (Math.random()-0.5)*0.8,
      vy: Math.sin(angle)*speed + (Math.random()-0.5)*0.8,
      life: 90 + Math.random()*40,
      alpha: 1
    });
  }
}

function tickFireworks() {
  if (!fireworksActive && particles.length === 0) return;

  ctx.clearRect(0,0,window.innerWidth,window.innerHeight);

  for (let i=particles.length-1;i>=0;i--){
    const p = particles[i];
    p.x += p.vx;
    p.y += p.vy;
    p.vy += 0.03;
    p.vx *= 0.992;
    p.vy *= 0.992;
    p.life -= 1;
    p.alpha = Math.max(0, p.life / 120);

    ctx.globalAlpha = p.alpha;
    ctx.fillRect(p.x, p.y, 2, 2);

    if (p.life <= 0) particles.splice(i,1);
  }
  ctx.globalAlpha = 1;

  requestAnimationFrame(tickFireworks);
}

function startFireworksBurst(times=6) {
  fireworksActive = true;
  for (let i=0;i<times;i++){
    setTimeout(()=>{
      const x = 60 + Math.random()*(window.innerWidth-120);
      const y = 120 + Math.random()*(window.innerHeight*0.45);
      addExplosion(x,y, 55 + Math.random()*25);
      tickFireworks();
    }, i*220);
  }
  setTimeout(()=>{ fireworksActive = false; }, times*260 + 800);
}

function startFireworksFinale() {
  fireworksActive = true;
  let t = 0;
  const iv = setInterval(()=>{
    t++;
    const x = 60 + Math.random()*(window.innerWidth-120);
    const y = 100 + Math.random()*(window.innerHeight*0.5);
    addExplosion(x,y, 70 + Math.random()*30);
    tickFireworks();
    if (t >= 20) {
      clearInterval(iv);
      setTimeout(()=>{ fireworksActive = false; }, 1200);
    }
  }, 160);
}

render();
</script>
</body>
</html>



